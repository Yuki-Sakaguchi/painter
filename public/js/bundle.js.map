{"version":3,"sources":["webpack:///webpack/bootstrap a4fed136c2589e8f10b2","webpack:///./src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a4fed136c2589e8f10b2","// TODO\n// \t\t・ブックマークレット化(githubを使って良き感じにすれば中身を書き換えやすい)\n//\t\t・一つ戻る\n\n/**\n * ペインター\n */\n;(function() {\n\tconst rootPath = 'https://yuki-sakaguchi.github.io/painter/public/';\n\n\t// 定数\n\tconst createjsUrl: string = 'https://code.createjs.com/1.0.0/createjs.min.js', // http://code.createjs.com/easeljs-0.8.1.min.js',\n\t\t\t\tsaveUrl: string = `${rootPath}js/html2canvas.js`,\n\t\t\t\tclassName: string = 'active',\n\t\t\t\tmodeName: string = 'data-mode';\n\n\t// グローバル変数\n\tlet elCanvas: HTMLElement,\n\t\t\telTool: HTMLElement,\n\t\t\telSave: HTMLElement,\n\t\t\tstage: any,\n\t\t\tline: createjs.Shape,\n\t\t\tart: createjs.Shape,\n\t\t\tlastPoint: createjs.Point,\n\t\t\tcounter: number[],\n\t\t\tfontWeight: number,\n\t\t\tfontColor: string,\n\t\t\teditMode: number;\n\n\t// モード\n\tenum mode {\n\t\t'pen' = 1,\n\t\t'eraser' = 2,\n\t\t'weight' = 3,\n\t\t'save' = 4,\n\t\t'trash' = 5\n\t};\n\n\t/**\n\t * 初期化\n\t */\n\tfunction init(): void {\n\t\tcreateDom();\n\n\t\t// 必要なライブラリをロード\n\t\tlet elCreate: HTMLScriptElement = document.createElement('script');\n\t\telCreate.src = createjsUrl;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(elCreate);\n\n\t\t// createjsロード完了後に初期設定\n\t\telCreate.addEventListener('load', () => {\n\t\t\t// canvas\n\t\t\telCanvas = document.getElementById('painter-canvas');\n\t\t\tsetWindowSize();\n\n\t\t\t// ツール\n\t\t\telTool = document.getElementById('painter-tool');\n\n\t\t\t// 初期設定\n\t\t\tstage = new createjs.Stage(elCanvas);\n\t\t\tline = new createjs.Shape();\n\t\t\tart = stage.addChild(line);\n\t\t\tart.cache(0, 0, elCanvas.clientWidth, elCanvas.clientHeight);\n\t\t\tlastPoint = new createjs.Point();\n\t\t\tcounter = [0, 0];\n\t\t\tfontWeight = 10;\n\t\t\tfontColor = createjs.Graphics.getHSL(0, 50, 50);\n\t\t\teditMode = mode.pen;\n\n\t\t\tif (createjs.Touch.isSupported()) {\n\t\t\t\t// タッチ操作を有効にします。\n\t\t\t\tcreatejs.Touch.enable(stage)\n\t\t\t}\n\n\t\t\t// colorセット\n\t\t\tsetColor();\n\n\t\t\t// 表示\n\t\t\telCanvas.className += ` ${className}`;\n\t\t\telTool.className += ` ${className}`;\n\n\t\t\t// イベント追加\n\t\t\tstage.addEventListener('stagemousedown', drowStart);\n\t\t\t[].forEach.call(elTool.children, (e: HTMLElement): void => e.addEventListener('click', changeMode));\n\t\t\twindow.addEventListener('resize', setWindowSize);\n\t\t\telTool.getElementsByClassName('save')[0].addEventListener('click', save);\n\t\t\telTool.getElementsByClassName('trash')[0].addEventListener('click', trash);\n\t\t});\n\t}\n\n\t/**\n\t * 必要なDOM要素を作成する\n\t */\n\tfunction createDom() {\n\t\tlet elWrap = document.createElement('div');\n\t\telWrap.id = elWrap.className = 'painter-wrap';\n\n\t\tlet linkFont = document.createElement('link');\n\t\tlinkFont.setAttribute('rel', 'stylesheet');\n\t\tlinkFont.setAttribute('href', 'https://use.fontawesome.com/releases/v5.0.1/css/all.css');\n\n\t\tlet linkCss = document.createElement('link');\n\t\tlinkCss.setAttribute('rel', 'stylesheet');\n\t\tlinkCss.setAttribute('href', `${rootPath}css/main.css`);\n\n\t\tlet elCanvas = document.createElement('canvas');\n\t\telCanvas.id = elCanvas.className = 'painter-canvas';\n\t\t\n\t\tlet elPainter = document.createElement('div');\n\t\telPainter.id = elPainter.className = 'painter';\n\n\t\tlet elTool = document.createElement('ul');\n\t\telTool.id = elTool.className = 'painter-tool';\n\n\t\tlet toolItem = [\n\t\t\t{\n\t\t\t\tclassName: 'pen active',\n\t\t\t\tmode: '1',\n\t\t\t\ticonClassName: 'fas fa-pencil-alt',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassName: 'eraser',\n\t\t\t\tmode: '2',\n\t\t\t\ticonClassName: 'fa fa-eraser',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassName: 'save',\n\t\t\t\tmode: '3',\n\t\t\t\ticonClassName: 'fas fa-sign-in-alt',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassName: 'trash',\n\t\t\t\tmode: '4',\n\t\t\t\ticonClassName: 'fas fa-trash-alt',\n\t\t\t}\n\t\t];\n\n\t\tfor (let i = 0, len = toolItem.length; i < len; i++) {\n\t\t\tlet elToolItem = document.createElement('li');\n\t\t\telToolItem.setAttribute('class', `painter-tool__item ${toolItem[i].className}`);\n\t\t\telToolItem.setAttribute('data-mode', toolItem[i].mode);\n\n\t\t\tlet elDiv = document.createElement('div');\n\t\t\t\n\t\t\tlet elToolItemIcon = document.createElement('i');\n\t\t\telToolItemIcon.className = toolItem[i].iconClassName;\n\n\t\t\telTool.appendChild(elToolItem);\n\t\t\telToolItem.appendChild(elDiv);\n\t\t\telDiv.appendChild(elToolItemIcon);\n\t\t}\n\n\t\telWrap.appendChild(linkFont);\n\t\telWrap.appendChild(linkCss);\n\t\telWrap.appendChild(elCanvas);\n\t\telWrap.appendChild(elPainter);\n\t\telPainter.appendChild(elTool);\n\n\t\tdocument.body.appendChild(elWrap);\n\n\t\t// save\n\t\telSave = document.createElement('script');\n\t\telSave.setAttribute('src', saveUrl);\n\t\telWrap.appendChild(elSave);\n\t}\n\n\t/**\n\t * 描画開始\n\t * @param e \n\t */\n\tfunction drowStart(e: createjs.MouseEvent): void {\n\t\tstage.addEventListener('stagemousemove', drow);\n\t\tstage.addEventListener('stagemouseup', drowEnd);\n\t\tlastPoint.setValues(e.stageX, e.stageY);\n\t\tcounter[0] = 0;\n\t\tcounter[1] = 0;\n\t\tdocument.onmousemove = checkOutside;\n\t}\n\n\t/**\n\t *  描画\n\t * @param e \n\t */\n\tfunction drow(e): void {\n\t\t// モードによって変更\n\t\tlet compositeOperation = editMode == mode.eraser ? 'destination-out' : 'source-over';\n\t\t\n\t\t// 線を書く\n\t\tart.graphics.clear()\n\t\t.setStrokeStyle(fontWeight, 1)\n\t\t.beginStroke(fontColor)\n\t\t.moveTo(lastPoint.x, lastPoint.y)\n\t\t.lineTo(e.stageX, e.stageY);\n\n\t\t// 値をセットして更新\n\t\tart.updateCache(compositeOperation);\n\t\tlastPoint.setValues(e.stageX, e.stageY);\n\t\tcounter[0]++;\n\t\tstage.update();\n\t}\n\n\t/**\n\t * 描画終了\n\t * @param e \n\t */\n\tfunction drowEnd(e): void {\n\t\tstage.removeEventListener('stagemousemove', drow);\n\t\tstage.removeEventListener('stagemouseup', drowEnd);\n\t\tdocument.onmousemove = null;\n\t}\n\n\t/**\n\t * 画面外に出た時の処理\n\t * @param e \n\t */\n\tfunction checkOutside(e): void {\n\t\tcounter[1]++;\n\t\tif (counter[1] - counter[0] > 1) {\n\t\t\tdrowEnd(null);\n\t\t}\n\t}\n\n\t/**\n\t * モードを変更する\n\t * @param e \n\t */\n\tfunction changeMode(e): void {\n\t\tif (e.target.getAttribute('data-mode') == 4) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 現在のモードを取得\n\t\tlet elCurrent: HTMLElement[] = [].filter.call(elTool.children, (target: HTMLElement): boolean => {\n\t\t\tif (editMode == parseInt(target.getAttribute(modeName))) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\t// クラスの付け替え\n\t\telCurrent[0].className = elCurrent[0].className.replace(className, '');\n\t\te.target.className += ` ${className}`;\n\n\t\t// モード切り替え\n\t\teditMode = e.target.getAttribute(modeName);\n\t}\n\n\t/**\n\t * windowのサイズをキャンパスに指定\n\t */\n\tfunction setWindowSize() {\n\t\telCanvas.setAttribute('width', `${window.innerWidth}px`);\n\t\telCanvas.setAttribute('height', `${document.body.clientHeight}px`);\n\n\t\tif (stage) {\n\t\t\t// art.cache(0, 0, elCanvas.clientWidth, elCanvas.clientHeight);\n\t\t\tstage.update();\n\t\t}\n\t}\n\n\t/**\n\t * 色をセットする\n\t */\n\tfunction setColor() {\n\t\tlet elColor = elTool.getElementsByClassName('pen');\n\t\t[].find.call(elColor, (e) => e.style.color = fontColor);\n\t}\n\n\t/**\n\t * 保存する\n\t */\n\tfunction save() {\n\t\telTool.style.visibility = 'hidden';\n\t\thtml2canvas(document.querySelector('body')).then(canvas => {\n\t\t\t// document.body.appendChild(canvas);\n\t\t\tdownloadImage(canvas);\n\t\t\telTool.style.visibility = 'inherit';\n\t\t});\n\t}\n\n\tfunction trash() {\n\t\tif (confirm('全てを削除します')) {\n\t\t\tdocument.getElementById('painter-wrap').remove();\n\t\t}\n\t}\n\n\tfunction downloadImage(canvas) {\n\t\tvar dataUrl = canvas.toDataURL(\"image/png\");\n\t\tvar event = document.createEvent(\"MouseEvents\");\n\t\tevent.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t\tvar a = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\");\n\t\ta.setAttribute('href', dataUrl);\n\t\ta.setAttribute('download', 'html2canvas動作確認の出力結果イメージ');\n\t\ta.dispatchEvent(event);\n\t}\n \n\t// 実行\n\tinit();\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/ts/main.ts"],"sourceRoot":""}